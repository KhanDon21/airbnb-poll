<!DOCTYPE html>
<html>
<head>
  <title>Airbnb Poll</title>
</head>
<body>
  <h1>Vote for Your Favorite</h1>

  <button onclick="vote('meadow')">Meadow Mountain</button>
  <button onclick="vote('chalet')">Spacious Chalet</button>
  <button onclick="vote('duplex')">Private Duplex</button>
  <button onclick="vote('creekside')">Creekside in Pines</button>
  <button onclick="vote('rustic')">Luxury Rustic Home</button>

  <h2>Results</h2>
  <div id="results"></div>

  <script>
    const baseUrl = "https://script.google.com/macros/s/AKfycbygwrnks8r-mE2GDAyFR5R5QIPAvFDJ2vU7fT5aEdfedwsQrGelfRShIUl2bcV25E69/exec";

    async function vote(option) {
      try {
        const res = await fetch(`${baseUrl}?action=vote&option=${encodeURIComponent(option)}`);
        const data = await res.json();

        if (data.status === "ok") {
          alert("Vote recorded!");
          loadResults();
        } else {
          alert("Error: " + data.message);
        }
      } catch (err) {
        console.error(err);
        alert("Network or server error");
      }
    }

    async function loadResults() {
      try {
        const res = await fetch(`${baseUrl}?action=results`);
        const data = await res.json();

        if (data.status === "ok") {
          document.getElementById("results").innerHTML = data.results
            .map(r => `${r.description}: ${r.votes}`)
            .join("<br>");
        } else {
          document.getElementById("results").textContent = "Error loading results";
        }
      } catch (err) {
        console.error(err);
        document.getElementById("results").textContent = "Network or server error";
      }
    }

    loadResults();
  </script>
</body>
</html>







