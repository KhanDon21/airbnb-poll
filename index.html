<!DOCTYPE html>
<html>
<head>
<title>Airbnb Poll</title>
<style>
  body { font-family: Arial; margin: 20px; }
  .option { margin: 10px 0; padding: 10px; border: 1px solid #ccc; border-radius: 5px; }
  button { margin-top: 5px; }
</style>
</head>
<body>
<h2>Which Airbnb do you prefer?</h2>
<div id="poll"></div>

<script>
const scriptURL = 'https://script.google.com/macros/s/AKfycbzwxzJumwtBvyuU5PcUdld-wFd2V_6tKANgRfBvTOWPbd579rdO7Z-W7HnpPcSsyi1VBQ/exec'; // Replace with Apps Script Web App URL

async function loadPoll() {
  const res = await fetch(`${scriptURL}?action=getTotals`);
  const data = await res.json();
  const container = document.getElementById('poll');
  container.innerHTML = '';
  for (let id in data) {
    const opt = data[id];
    const div = document.createElement('div');
    div.className = 'option';
    div.innerHTML = `
      <div>${opt.name}</div>
      <div>Votes: ${opt.votes}</div>
      <button onclick="vote('${id}')">Vote</button>
    `;
    container.appendChild(div);
  }
}

async function vote(optionId) {
  await fetch(`${scriptURL}?action=vote&option=${optionId}`);
  loadPoll();
}

loadPoll();
</script>
</body>
</html>









